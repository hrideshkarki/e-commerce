{% extends 'base.html' %}
{% block content%}
<div class="container home-container">
    {% if current_user.is_authenticated %}
    <!-- <h1>This will be the homepage if we are logged in</h1> -->

    <div class="row" style = "margin-top: 2vw;">
        {% for p in products %}
        <div class="col-md-6 mb-4">
          <div class="card" style="width: 100%;">
            <img src="{{p.image}}" class="card-img-top" alt="...">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{p.title}}</h5>
              <p class="card-text" align = "center"><b>${{p.price}}</b></p>
              {% if current_user.is_admin %}
              <div class="button-container position-relative mt-auto">
                <a class="card-text btn btn-info" href="/edit-product/{{p.id}}">Edit Product</a>
                <a class="card-text btn btn-warning " href="/remove-item/{{p.id}}" style="position: absolute; right:0;">Remove</a>
              </div>
              {% endif %}
            </div>
            {% if not current_user.is_admin %}
            <div class="card-footer mt-auto">
              {% if p.in_cart %}
              <a class="card-text" href="/remove-from-cart/{{p.id}}">Remove from cart</a>
              {% else %}
              <a class="card-text" href="/add-to-cart/{{ p.id }}">Add to cart</a>   
              {% endif %} 
            </div>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>

    {% else %}
    <!-- <h1>This will be the homepage for Guests</h1> -->
    <!-- <h6>Maybe some other text</h6> -->

    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active" align="center">
          <img class="d-block" src="{{products[0].image}}" alt="First slide">
          <div class="carousel-caption d-none d-md-block">
            <h5 style="color:black; background-color:#ffffffaa; border-radius: 3px;">{{products[0].title}}</h5>
          </div>
        </div>
        <div class="carousel-item" align="center">
          <img class="d-block" src="{{products[1].image}}" alt="Second slide">
          <div class="carousel-caption d-none d-md-block">
            <h5 style="color:black; background-color:#ffffffaa; border-radius: 3px;">{{products[1].title}}</h5>
          </div>
        </div>
        <div class="carousel-item" align="center">
          <img class="d-block" src="{{products[2].image}}" alt="Third slide">
          <div class="carousel-caption d-none d-md-block">
            <h5 style="color:black; background-color:#ffffffaa; border-radius: 3px;">{{products[2].title}}</h5>
          </div>
        </div>
      </div>
      <a class="carousel-control-prev" data-bs-target="#carouselExampleControls" role="button" data-bs-slide="prev">
        <img src="./static/img/left-arrow.png"class="carousel-control-prev-icon" aria-hidden="true"></img>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" data-bs-target="#carouselExampleControls" role="button" data-bs-slide="next">
        <img src="./static/img/right-arrow.png" class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <div align="center">
      <button type="button" onclick="window.location.href='/signup'"class="btn btn-success">Sign up</button>
      <button type="button" onclick="window.location.href='/login'"class="btn btn-primary" style="height: 36px; width: 100px;">Login</button>
      </div>
    {% endif %}
</div>
{% endblock %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>